{
  "$schema": "https://choria.io/schemas/mcorpc/ddl/v1/agent.json",
  "metadata": {
    "license": "GNU General Public License v3.0",
    "author": "Alexander Hermes (@ExalDraen)",
    "timeout": 15,
    "name": "user",
    "version": "0.2.1",
    "url": "https://github.com/exaldraen/choria-plugin-user-agent",
    "description": "Interact with users on a system",
    "provider": "external"
  },
  "actions": [
    {
      "action": "echo",
      "input": {
        "message": {
          "prompt": "The message to send for echoing",
          "description": "This message will be echoed back",
          "type": "string",
          "optional": false,
          "validation": "shellsafe",
          "maxlength": 512
        }
      },
      "output": {
        "message": {
          "description": "Echo of the original message",
          "display_as": "Echo",
          "type": "string"
        }
      },
      "display": "ok",
      "description": "Echo text back"
    },
    {
      "action": "list",
      "input": {
        "dummy": {
          "prompt": "Dummy param, workaround",
          "description": "Dummy param. Workaround for https://github.com/choria-io/mcorpc-agent-provider/issues/126",
          "type": "string",
          "optional": true,
          "validation": "shellsafe",
          "maxlength": 512
        }
      },
      "output": {
        "sessions": {
          "description": "List of logged-in user sessions",
          "display_as": "Session List",
          "type": "array"
        }
      },
      "display": "ok",
      "description": "List logged-in users on a system"
    },
    {
      "action": "kill",
      "input": {
        "user": {
          "prompt": "Username",
          "description": "Name of the user whose sessions will be killed",
          "type": "string",
          "optional": false,
          "validation": "shellsafe",
          "maxlength": 128
        }
      },
      "output": {},
      "display": "ok",
      "description": "Kill all sessions belonging to the given user"
    }
  ]
}